{"ast":null,"code":"import React from\"react\";import{Link}from\"react-router-dom\";import{pluralize}from\"../../utils/helpers\";import{useStoreContext}from\"../../utils/GlobalState\";import{ADD_TO_CART,UPDATE_CART_QUANTITY}from\"../../utils/actions\";import{idbPromise}from\"../../utils/helpers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(item){const[state,dispatch]=useStoreContext();const{image,name,_id,price,quantity}=item;const{cart}=state;const addToCart=()=>{const itemInCart=cart.find(cartItem=>cartItem._id===_id);if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise('cart','put',{...itemInCart,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});}else{dispatch({type:ADD_TO_CART,product:{...item,purchaseQuantity:1}});idbPromise('cart','put',{...item,purchaseQuantity:1});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card px-1 py-1\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(_id),children:[/*#__PURE__*/_jsx(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/_jsx(\"p\",{children:name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[quantity,\" \",pluralize(\"item\",quantity),\" in stock\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add to cart\"})]});}export default ProductItem;","map":{"version":3,"names":["React","Link","pluralize","useStoreContext","ADD_TO_CART","UPDATE_CART_QUANTITY","idbPromise","jsx","_jsx","jsxs","_jsxs","ProductItem","item","state","dispatch","image","name","_id","price","quantity","cart","addToCart","itemInCart","find","cartItem","type","purchaseQuantity","parseInt","product","className","children","to","concat","alt","src","onClick"],"sources":["C:/Users/mikeg/bootcamp/Homeworks/Week_22-State/01-Activities/23-Ins_Stripe/client/src/components/ProductItem/index.js"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { pluralize } from \"../../utils/helpers\"\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nfunction ProductItem(item) {\n  const [state, dispatch] = useStoreContext();\n\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n\n  const { cart } = state\n\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === _id)\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: _id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n      idbPromise('cart', 'put', {\n        ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        product: { ...item, purchaseQuantity: 1 }\n      });\n      idbPromise('cart', 'put', { ...item, purchaseQuantity: 1 });\n    }\n  }\n\n  return (\n    <div className=\"card px-1 py-1\">\n      <Link to={`/products/${_id}`}>\n        <img\n          alt={name}\n          src={`/images/${image}`}\n        />\n        <p>{name}</p>\n      </Link>\n      <div>\n        <div>{quantity} {pluralize(\"item\", quantity)} in stock</div>\n        <span>${price}</span>\n      </div>\n      <button onClick={addToCart}>Add to cart</button>\n    </div>\n  );\n}\n\nexport default ProductItem;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,OAASC,eAAe,KAAQ,yBAAyB,CACzD,OAASC,WAAW,CAAEC,oBAAoB,KAAQ,qBAAqB,CACvE,OAASC,UAAU,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjD,QAAS,CAAAC,WAAWA,CAACC,IAAI,CAAE,CACzB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,eAAe,CAAC,CAAC,CAE3C,KAAM,CACJY,KAAK,CACLC,IAAI,CACJC,GAAG,CACHC,KAAK,CACLC,QACF,CAAC,CAAGP,IAAI,CAER,KAAM,CAAEQ,IAAK,CAAC,CAAGP,KAAK,CAEtB,KAAM,CAAAQ,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,UAAU,CAAGF,IAAI,CAACG,IAAI,CAAEC,QAAQ,EAAKA,QAAQ,CAACP,GAAG,GAAKA,GAAG,CAAC,CAChE,GAAIK,UAAU,CAAE,CACdR,QAAQ,CAAC,CACPW,IAAI,CAAEpB,oBAAoB,CAC1BY,GAAG,CAAEA,GAAG,CACRS,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACFpB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAE,CACxB,GAAGgB,UAAU,CACbI,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACJ,CAAC,IAAM,CACLZ,QAAQ,CAAC,CACPW,IAAI,CAAErB,WAAW,CACjBwB,OAAO,CAAE,CAAE,GAAGhB,IAAI,CAAEc,gBAAgB,CAAE,CAAE,CAC1C,CAAC,CAAC,CACFpB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAE,CAAE,GAAGM,IAAI,CAAEc,gBAAgB,CAAE,CAAE,CAAC,CAAC,CAC7D,CACF,CAAC,CAED,mBACEhB,KAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BpB,KAAA,CAACT,IAAI,EAAC8B,EAAE,cAAAC,MAAA,CAAef,GAAG,CAAG,CAAAa,QAAA,eAC3BtB,IAAA,QACEyB,GAAG,CAAEjB,IAAK,CACVkB,GAAG,YAAAF,MAAA,CAAajB,KAAK,CAAG,CACzB,CAAC,cACFP,IAAA,MAAAsB,QAAA,CAAId,IAAI,CAAI,CAAC,EACT,CAAC,cACPN,KAAA,QAAAoB,QAAA,eACEpB,KAAA,QAAAoB,QAAA,EAAMX,QAAQ,CAAC,GAAC,CAACjB,SAAS,CAAC,MAAM,CAAEiB,QAAQ,CAAC,CAAC,WAAS,EAAK,CAAC,cAC5DT,KAAA,SAAAoB,QAAA,EAAM,GAAC,CAACZ,KAAK,EAAO,CAAC,EAClB,CAAC,cACNV,IAAA,WAAQ2B,OAAO,CAAEd,SAAU,CAAAS,QAAA,CAAC,aAAW,CAAQ,CAAC,EAC7C,CAAC,CAEV,CAEA,cAAe,CAAAnB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}