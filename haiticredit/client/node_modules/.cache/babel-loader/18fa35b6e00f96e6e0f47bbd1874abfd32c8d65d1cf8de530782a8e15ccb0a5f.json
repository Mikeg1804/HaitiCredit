{"ast":null,"code":"import React,{useEffect}from'react';import{useMutation}from'@apollo/client';import Jumbotron from'../components/Jumbotron';import{ADD_ORDER}from'../utils/mutations';import{idbPromise}from'../utils/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Success(){const[addOrder]=useMutation(ADD_ORDER);useEffect(()=>{async function saveOrder(){const cart=await idbPromise('cart','get');const products=cart.map(item=>item._id);if(products.length){const{data}=await addOrder({variables:{products}});const productData=data.addOrder.products;productData.forEach(item=>{idbPromise('cart','delete',item);});}setTimeout(()=>{window.location.assign('/');},3000);}saveOrder();},[addOrder]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Jumbotron,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Success!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Thank you for your purchase!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"You will now be redirected to the home page\"})]})});}export default Success;","map":{"version":3,"names":["React","useEffect","useMutation","Jumbotron","ADD_ORDER","idbPromise","jsx","_jsx","jsxs","_jsxs","Success","addOrder","saveOrder","cart","products","map","item","_id","length","data","variables","productData","forEach","setTimeout","window","location","assign","children"],"sources":["C:/Users/mikeg/bootcamp/Homeworks/Week_22-State/01-Activities/23-Ins_Stripe/client/src/pages/Success.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Jumbotron from '../components/Jumbotron';\nimport { ADD_ORDER } from '../utils/mutations';\nimport { idbPromise } from '../utils/helpers';\n\nfunction Success() {\n  const [addOrder] = useMutation(ADD_ORDER);\n\n  useEffect(() => {\n    async function saveOrder() {\n      const cart = await idbPromise('cart', 'get');\n      const products = cart.map((item) => item._id);\n\n      if (products.length) {\n        const { data } = await addOrder({ variables: { products } });\n        const productData = data.addOrder.products;\n\n        productData.forEach((item) => {\n          idbPromise('cart', 'delete', item);\n        });\n      }\n\n      setTimeout(() => {\n        window.location.assign('/');\n      }, 3000);\n    }\n\n    saveOrder();\n  }, [addOrder]);\n\n  return (\n    <div>\n      <Jumbotron>\n        <h1>Success!</h1>\n        <h2>Thank you for your purchase!</h2>\n        <h2>You will now be redirected to the home page</h2>\n      </Jumbotron>\n    </div>\n  );\n}\n\nexport default Success;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,OAASC,SAAS,KAAQ,oBAAoB,CAC9C,OAASC,UAAU,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,QAAQ,CAAC,CAAGT,WAAW,CAACE,SAAS,CAAC,CAEzCH,SAAS,CAAC,IAAM,CACd,cAAe,CAAAW,SAASA,CAAA,CAAG,CACzB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAR,UAAU,CAAC,MAAM,CAAE,KAAK,CAAC,CAC5C,KAAM,CAAAS,QAAQ,CAAGD,IAAI,CAACE,GAAG,CAAEC,IAAI,EAAKA,IAAI,CAACC,GAAG,CAAC,CAE7C,GAAIH,QAAQ,CAACI,MAAM,CAAE,CACnB,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAR,QAAQ,CAAC,CAAES,SAAS,CAAE,CAAEN,QAAS,CAAE,CAAC,CAAC,CAC5D,KAAM,CAAAO,WAAW,CAAGF,IAAI,CAACR,QAAQ,CAACG,QAAQ,CAE1CO,WAAW,CAACC,OAAO,CAAEN,IAAI,EAAK,CAC5BX,UAAU,CAAC,MAAM,CAAE,QAAQ,CAAEW,IAAI,CAAC,CACpC,CAAC,CAAC,CACJ,CAEAO,UAAU,CAAC,IAAM,CACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,GAAG,CAAC,CAC7B,CAAC,CAAE,IAAI,CAAC,CACV,CAEAd,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,mBACEJ,IAAA,QAAAoB,QAAA,cACElB,KAAA,CAACN,SAAS,EAAAwB,QAAA,eACRpB,IAAA,OAAAoB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBpB,IAAA,OAAAoB,QAAA,CAAI,8BAA4B,CAAI,CAAC,cACrCpB,IAAA,OAAAoB,QAAA,CAAI,6CAA2C,CAAI,CAAC,EAC3C,CAAC,CACT,CAAC,CAEV,CAEA,cAAe,CAAAjB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}